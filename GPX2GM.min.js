var GPX2GM=GPX2GM||(function(){var m=h(navigator.language||navigator.userLanguage),f=0,l=(m=="en-US"?"us":"si"),g={en:{Strecke:"Distance","Strecke in ":"Distance in ","H<br />ö<br />h<br />e<br />&nbsp;<br />in<br />&nbsp;<br />":"E<br />l<br />v<br />.<br />&nbsp;<br />in<br />&nbsp;<br />","Stg.<br />&nbsp;<br />in<br />&nbsp;<br />%":"Grd.<br />&nbsp;<br />in<br />&nbsp;<br />%","V<br />&nbsp;<br />in<br />&nbsp;<br />":"Spd.<br />&nbsp;<br />in<br />&nbsp;<br />",Wegpunkt:"Waypoint",Wegpunkte:"Waypoints",Track:"Track",Tracks:"Tracks",Route:"Route",Routen:"Routes","Höhe":"Elev.","Geschw.":"Speed","Stg.":"Grade",Fehler:"Error","Beim Oeffnen der Datei ":"Could not open the GPX file "," ist der Fehler ":" because the error "," aufgetreten!":" was received!","Ihr Browser unterstützt nicht die benötigten Methoden!":"Your browser doesn't support the methods needed by Google maps."}},k={us:{m:{factor:3.2808,label:"ft"},km:{factor:0.62137,label:"mi"},"km/h":{factor:0.62137,label:"mi/h"}}};function h(v){v=v.replace(/_/,"-").toLowerCase();if(v.length>3){v=v.substring(0,3)+v.substring(3).toUpperCase()}return v}function u(w){var v=m.slice(0,2),x=w;if(typeof g[v]==="object"&&typeof g[v][w]==="string"){x=g[v][w]}return x}function r(x,z,w,A){var v,y=false;if(typeof k[l]==="object"&&typeof k[l][x]==="object"){y=k[l][x]}if(typeof z!=="number"){if(y){return y.label}else{return x}}v=z;if(y){v*=y.factor}if(typeof w==="number"){v=parseFloat(v.toFixed(w))}if(typeof A!=="boolean"){A=true}if(A){if(y){v=v+y.label}else{v=v+x}}return v}if(typeof(t)=="undefined"){var t=false}function i(aQ){var M=(typeof(LargeMapControll)!="undefined")?LargeMapControll:false;var aS=(typeof(OverviewMapControl)!="undefined")?OverviewMapControl:false;var ah=(typeof(Legende)!="undefined")?Legende:true;var K=(typeof(Legende_trk)!="undefined")?Legende_trk:true;var a3=(typeof(Legende_rte)!="undefined")?Legende_rte:true;var W=(typeof(Legende_wpt)!="undefined")?Legende_wpt:true;var ad=(typeof(Tracks_verbinden)!="undefined")?Tracks_verbinden:false;var ak=(typeof(readSpeed)!="undefined")?readSpeed:true;var ap=(typeof(TrackOver)!="undefined")?TrackOver:true;var aK=(typeof(shTRcmt)!="undefined")?shTRcmt:false;var V=(typeof(DisplayColor)!="undefined")?DisplayColor:false;var a0=2;var aD=2;var U=3;var Q=0.8;var aG=0.8;var aI=new Array("#ff0000","#00ff00","#0000ff","#aaaa00","#ff00ff","#00ffff","#000000");var an=new Array("#800000","#008000","#000080","#808000","#800080","#008080","#808080");var a5="#000000";var aW={scenic:{image:"scenic.png",iconSize:[21,31],shadow:"shadow.png",shadowSize:[52,29],iconAnchor:[5,30],infoWindowAnchor:[10,5]},marker:{image:"marker.gif",iconSize:[11,11],iconAnchor:[5,5]}};var X=function(a6){var w=new GIcon();if(aW[a6]){if(aW[a6].image){w.image=x+aW[a6].image}if(aW[a6].iconSize){w.iconSize=new GSize(aW[a6].iconSize[0],aW[a6].iconSize[1])}if(aW[a6].shadow){w.shadow=x+aW[a6].shadow}if(aW[a6].shadowSize){w.shadowSize=new GSize(aW[a6].shadowSize[0],aW[a6].shadowSize[1])}if(aW[a6].iconAnchor){w.iconAnchor=new GPoint(aW[a6].iconAnchor[0],aW[a6].iconAnchor[1])}if(aW[a6].infoWindowAnchor){w.infoWindowAnchor=new GPoint(aW[a6].infoWindowAnchor[0],aW[a6].infoWindowAnchor[1])}}return w};e(aQ,"makeMap",false);var a4=new c();var aU=this;var af=aQ;var Z=aQ+"_hp";var aB=aQ+"_sp";var F=aQ+"_vp";var B=false;var ay=1000,aR=-1000,aP=1000,v=-1000;var I=1;var J,aE,ae;var ab,E;var C,aT,T,aM,a1,aa;var ac,ao,al,aF;var H=new Array();var x="";var aN=document.getElementsByTagName("script");var am=u("Strecke in ")+r("km");var A=u("Strecke in ")+r("km");var aL=u("Strecke in ")+r("km");var S=u("H<br />ö<br />h<br />e<br />&nbsp;<br />in<br />&nbsp;<br />")+r("m");var av=u("Stg.<br />&nbsp;<br />in<br />&nbsp;<br />%");var aY=u("V<br />&nbsp;<br />in<br />&nbsp;<br />")+r("km/h");for(var ai=0;ai<aN.length;ai++){if(aN[ai].src&&aN[ai].src.length){var aq=aN[ai].src;var aX=aq.search(/GPX2GM(\.min)?.js/);if(aX!=-1){x=aq.substring(0,aX);break}}}var ag=X("scenic");var aw=X("marker");var D;var aH=document.createElement("div");aH.style.position="absolute";aH.style.visibility="hidden";aH.style.border="1px solid black";aH.style.backgroundColor="white";var L=document.getElementById(af);var Y=L.offsetWidth;var aj=L.offsetHeight;var aJ=document.createElement("div");aJ.id="map_head"+af;aJ.style.margin=0;aJ.style.padding=0;aJ.appendChild(document.createTextNode(": "));var aV=document.createElement("div");aV.id="map_"+af;aV.style.width=Y+"px";while(L.hasChildNodes()){L.removeChild(L.firstChild)}if(!ah){aJ.style.display="none"}L.appendChild(aJ);L.appendChild(aV);if(ah){aV.style.height=aj-aV.offsetTop+aJ.offsetTop+"px"}else{aV.style.height=aj+"px"}var N=new GMap2(document.getElementById("map_"+af));if(M){N.addControl(new GLargeMapControl())}else{N.addControl(new GSmallMapControl())}if(aS){N.addControl(new GOverviewMapControl())}N.addMapType(G_PHYSICAL_MAP);var ax=new GCopyrightCollection('&copy; 2009 <a href="http://www.openstreetmap.org/">OpenStreetMap</a>');ax.addCopyright(new GCopyright(1,new GLatLngBounds(new GLatLng(-90,-180),new GLatLng(90,180)),0,'(<a rel="license" href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>)'));var at=new Array();at[0]=new GTileLayer(ax,0,18);at[0].getTileUrl=function(w,a6){return"http://tile.openstreetmap.org/"+a6+"/"+w.x+"/"+w.y+".png"};at[0].isPng=function(){return true};at[0].getOpacity=function(){return 1};J=new GMapType(at,new GMercatorProjection(19),"OSM Mapnik",{urlArg:"mapnik",linkColor:"#000000"});N.addMapType(J);var P=new Array();P[0]=new GTileLayer(ax,0,17);P[0].getTileUrl=function(w,a6){return"http://tah.openstreetmap.org/Tiles/tile/"+a6+"/"+w.x+"/"+w.y+".png"};P[0].isPng=function(){return true};P[0].getOpacity=function(){return 1};aE=new GMapType(P,new GMercatorProjection(19),"OSM T&H",{urlArg:"tah",linkColor:"#000000"});N.addMapType(aE);ax=new GCopyrightCollection('&copy; 2009 <a href="http://www.opencyclemap.org/">OpenCycleMap</a> <a href="http://www.openstreetmap.org/">OpenStreetMap</a>');ax.addCopyright(new GCopyright(1,new GLatLngBounds(new GLatLng(-90,-180),new GLatLng(90,180)),0,'(<a rel="license" href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>)'));var R=new Array();R[0]=new GTileLayer(ax,0,17);R[0].getTileUrl=function(w,a6){return"http://andy.sandbox.cloudmade.com/tiles/cycle/"+a6+"/"+w.x+"/"+w.y+".png"};R[0].isPng=function(){return true};R[0].getOpacity=function(){return 1};ae=new GMapType(R,new GMercatorProjection(19),"OSM Cycle",{urlArg:"cycle",linkColor:"#000000"});N.addMapType(ae);N.addControl(new GMenuMapTypeControl());N.addControl(new GScaleControl());N.enableScrollWheelZoom();N.getPane(G_MAP_FLOAT_PANE).appendChild(aH);GEvent.addListener(N,"infowindowopen",function(){N.savePosition()});GEvent.addListener(N,"infowindowclose",function(){N.returnToSavedPosition()});var au=document.getElementById(Z);var z;if(au){z=new q(Z,"x","h");if(au.className&&au.className.search("no_x")!=-1){am=""}e(af,"Höhenprofil, ID: "+Z,false)}var aO=document.getElementById(aB);var y;if(aO){y=new q(aB,"x","s");if(aO.className&&aO.className.search("no_x")!=-1){aL=""}e(af,"Steigungsplot, ID: "+aB,false)}var O=document.getElementById(F);var ar;if(O){ar=new q(F,"x","v");if(O.className&&O.className.search("no_x")!=-1){A=""}e(af,"Geschwindigkeitsprofil, ID: "+F,false)}this.Spur=function(a6,w){e(af,"Spur, Filename: "+a6,false);if(w=="osm_mapnik_map"){E=J}else{if(w=="osm_tah_map"){E=aE}else{if(w=="osm_cycle_map"){E=ae}else{E=w}}}if(ab!=a6){ab=a6;e(af,"Lade Datei "+ab,false);GDownloadUrl(ab,function(a8,a7){if(a7!=200){e(af,u("Beim Oeffnen der Datei ")+ab+u(" ist der Fehler ")+a7+u(" aufgetreten!"),true);return}aU.parseGPX(a8);aU.setMapHead();I=N.getBoundsZoomLevel(new GLatLngBounds(new GLatLng(ay,aP),new GLatLng(aR,v)));aU.rescale();N.setMapType(E);aU.checkBoxes()})}else{aU.checkBoxes()}};var G,a2,aA;this.setMapHead=function(){e(af,"setMapHead",false);var w=ab.replace(/.+\//,"");aJ.innerHTML=w+": ";if(aT.length){if(aT.length==1){var a7=new Array(u("Wegpunkt")+String.fromCharCode(160))}else{if(aT.length>1){var a7=new Array(u("Wegpunkte")+String.fromCharCode(160))}}G=new s(aJ.id,a7,aQ+"_wpt",["black"],W,aU.checkBoxes)}if(C.length){var a7=new Array();if(C.length==1){a7[0]=u("Track")+" ("+r("km",aM[0],10,true)+") "+String.fromCharCode(160)}else{if(C.length>1){a7[0]=u("Tracks")+" ("+r("km",aM.sum(),10,true)+") "+String.fromCharCode(160);for(var a6=0;a6<C.length;a6++){a7[a6+1]=ao[a6]+" ("+r("km",aM[a6],10,true)+")"}}}a2=new s(aJ.id,a7,aQ+"_trk",H,K,aU.checkBoxes)}if(T.length){var a7=new Array();if(T.length==1){a7[0]=u("Route")+" ("+r("km",a1[0],10,true)+") "+String.fromCharCode(160)}else{if(T.length>1){a7[0]=u("Routen")+" ("+r("km",a1.sum(),10,true)+") "+String.fromCharCode(160);for(var a6=0;a6<T.length;a6++){a7[a6+1]=ac[a6]+" ("+r("km",a1[a6],10,true)+")"}}}aA=new s(aJ.id,a7,aQ+"_rt",an,a3,aU.checkBoxes)}};this.checkBoxes=function(a7,w){var a6="";if(G&&G.status[0]){a6+="w"}if(a2&&a2.status[0]){a6+="t"}if(aA&&aA.status[0]){a6+="r"}aU.show(a6)};this.parseGPX=function(bE){e(af,"parseGPX",false);var bt=new this.Entfernung();C=new Array();aa=new Array();ao=new Array();aF=new Array();aM=new Array();B=false;ay=1000;aR=-1000;aP=1000;v=-1000;var bg=GXml.parse(bE);var a9=bg.documentElement.getElementsByTagName("trk");e(af,a9.length+"Tracks gefunden",false);for(var bv=0;bv<a9.length;bv++){var a8=a9[bv].getElementsByTagName("trkseg");if(a8.length==0){a8=[a9[bv]]}var bb=a9[bv].getElementsByTagName("name");if(bb.length&&bb[0].firstChild&&bb[0].firstChild.length&&bb[0].parentNode==a9[bv]){ao[bv]=bb[0].firstChild.data}else{ao[bv]=u("Track")+" "+bv}var bo=a9[bv].getElementsByTagName("cmt");if(aK&&bo.length&&bo[0].firstChild&&bo[0].firstChild.length&&bo[0].parentNode==a9[bv]){aF[bv]=bo[0].firstChild.data}else{aF[bv]=""}H[bv]=aI[bv%aI.length];if(V){var bD=a9[bv].getElementsByTagName("extensions");if(bD.length){var bc=b(bD[0],"gpxx","DisplayColor");if(bc.length&&bc[0].firstChild&&bc[0].firstChild.length){H[bv]=bc[0].firstChild.data}}}e(af,a8.length+"Tracksegmente in Track "+bv+" gefunden",false);for(var bw=0;bw<a8.length;bw++){var bk=a8[bw].getElementsByTagName("trkpt");var ba=bk.length;var bf=new Array();var bC=new Array();var bd=0;if(ad&&bv>0){bd=aM.sum()}var bm=0;var a7=au||aO,by=O,be=O,bB,br,bp;e(af,ba+" Trackpunkte in Tracksegment "+bw+" in Track "+bv+" gefunden",false);for(var bz=0;bz<ba;bz++){var bl=parseFloat(bk[bz].getAttribute("lat"));var a6=parseFloat(bk[bz].getAttribute("lon"));bf.push(new GLatLng(bl,a6));if(bl<ay){ay=bl}if(bl>aR){aR=bl}if(a6<aP){aP=a6}if(a6>v){v=a6}if(a7&&bk[bz].getElementsByTagName("ele").length&&bk[bz].getElementsByTagName("ele")[0].hasChildNodes()){bB=parseFloat(bk[bz].getElementsByTagName("ele")[0].firstChild.data)}else{a7=false;bB=-1000000}if(by&&bk[bz].getElementsByTagName("time").length&&bk[bz].getElementsByTagName("time")[0].hasChildNodes()){br=p(bk[bz].getElementsByTagName("time")[0].firstChild.data)}else{by=false;br=-1}if(be&&ak&&bk[bz].getElementsByTagName("speed").length&&bk[bz].getElementsByTagName("speed")[0].hasChildNodes()){bp=parseFloat(bk[bz].getElementsByTagName("speed")[0].firstChild.data)}else{bp=-1;be=false}if(bz==0){bt.init(bl,a6)}var w=bt.rechne(bl,a6);bm+=w;bC.push({lat:bl,lon:a6,x:bm+bd,t:br,h:bB,dx:w,v:bp})}if(a7){bC=j(bC,"x","h","hs",ba/50);bC=d(bC,"x","hs","s",0.1);bC=j(bC,"x","s","s",ba/50)}else{au=false;aO=false}if(by&&!be){bC=j(bC,"t","x","xs",ba/200);bC=d(bC,"t","xs","v",3600000);bC=j(bC,"x","v","v",ba/200)}else{if(!by&&!be){O=false}}}if(a7){e(af,"Höhendaten gefunden",false)}else{e(af,"Keine Höhendaten gefunden",false)}if(by){e(af,"Zeitdaten gefunden",false)}else{e(af,"Keine Zeitdaten gefunden",false)}if(be){e(af,"Geschwindigkeitsdaten gefunden",false)}else{e(af,"Keine Geschwindigkeitsdate gefunden",false)}aa.push(bC);C.push(bf);aM.push(Math.round(bm*10)/10)}var bx=bg.documentElement.getElementsByTagName("rte");e(af,bx.length+" Routen gefunden",false);T=new Array();ac=new Array();al=new Array();a1=new Array();for(var bw=0;bw<bx.length;bw++){var bi=bx[bw].getElementsByTagName("rtept");e(af,bi.length+" Zwischenziele gefunden",false);var bA=new Array();var bj=0;var bb=bx[bw].getElementsByTagName("name");if(bb.length&&bb[0].firstChild&&bb[0].firstChild.length&&bb[0].parentNode==bx[bw]){ac[bw]=bb[0].firstChild.data}else{ac[bw]=u("Route")+" "+bw}var bo=bx[bw].getElementsByTagName("cmt");if(aK&&bo.length&&bo[0].firstChild&&bo[0].firstChild.length&&bo[0].parentNode==bx[bw]){al[bw]=bo[0].firstChild.data}else{al[bw]=""}for(var bz=0;bz<bi.length;bz++){var bl=parseFloat(bi[bz].getAttribute("lat"));var a6=parseFloat(bi[bz].getAttribute("lon"));if(bz==0){bt.init(bl,a6)}bj+=bt.rechne(bl,a6);if(bl<ay){ay=bl}if(bl>aR){aR=bl}if(a6<aP){aP=a6}if(a6>v){v=a6}bA.push(new GLatLng(bl,a6));var bD=bi[bz].getElementsByTagName("extensions");if(bD.length){var bq=b(bD[0],"gpxx","rpt");e(af,bq.length+" Routenpunkte (Garmin) gefunden",false);for(var bv=0;bv<bq.length;bv++){var bl=parseFloat(bq[bv].getAttribute("lat"));var a6=parseFloat(bq[bv].getAttribute("lon"));bj+=bt.rechne(bl,a6);if(bl<ay){ay=bl}else{if(bl>aR){aR=bl}}if(a6<aP){aP=a6}else{if(a6>v){v=a6}}bA.push(new GLatLng(bl,a6))}}}T.push(bA);a1.push(Math.round(bj*10)/10)}var bu=bg.documentElement.getElementsByTagName("wpt");e(af,bu.length+" Wegpunkte gefunden",false);aT=new Array();for(var bz=0;bz<bu.length;bz++){var bh=bu[bz];var bl=parseFloat(bh.getAttribute("lat"));var a6=parseFloat(bh.getAttribute("lon"));if(bl<ay){ay=bl}if(bl>aR){aR=bl}if(a6<aP){aP=a6}if(a6>v){v=a6}var bn=new Object();bn.lat=bl;bn.lon=a6;bn.name="";bn.cmt="";bn.desc="";var bb=bh.getElementsByTagName("name");var bo=bh.getElementsByTagName("cmt");var bs=bh.getElementsByTagName("desc");if(bb.length&&bb[0].firstChild&&bb[0].firstChild.length){bn.name=bb[0].firstChild.data}if(bo.length&&bo[0].firstChild&&bo[0].firstChild.length){bn.cmt=bo[0].firstChild.data}if(bs.length&&bs[0].firstChild&&bs[0].firstChild.length){bn.desc=bs[0].firstChild.data}aT.push(bn)}B=true};this.showWpts=function(){if(B){for(var a6=0;a6<aT.length;a6++){var w=aT[a6];if(aZ(w.name)){N.addOverlay(aC(w))}else{if(w.name.length||w.cmt.length){N.addOverlay(az(w))}else{N.addOverlay(new GMarker(new GLatLng(w.lat,w.lon)))}}}}};this.showTracks=function(){if(B){if(aa.length>1){for(var a7=0;a7<aa.length;a7++){var w=aa[a7];if(w.length&&a2.status[a7+1]){if(au){z.scale(w)}if(aO){y.scale(w)}if(O){ar.scale(w)}}}}else{if(aa.length==1){var w=aa[0];if(w.length){if(au){z.scale(w)}if(aO){y.scale(w)}if(O){ar.scale(w)}}}}if(au){z.frame(50,35,am,S,"km","m")}if(aO){y.frame(50,35,aL,av,"km","%")}if(O){ar.frame(50,35,A,aY,"km","km/h")}if(C.length>1){for(var a7=0;a7<C.length;a7++){if(a2.status[a7+1]){var a8="<strong>"+ao[a7]+" ("+r("km",aM[a7],10,true)+")</strong><br />"+aF[a7];this.makePolyline(N,C[a7],H[a7%H.length],a0,Q,U,a5,a8);if(aa[a7].length){if(au){z.plot(aa[a7],H[a7%H.length])}if(aO){y.plot(aa[a7],H[a7%H.length])}if(O){ar.plot(aa[a7],H[a7%H.length])}}}}if(ad){var a6=new Array();for(var a7=0;a7<aa.length;a7++){if(a2.status[a7+1]){a6=a6.concat(aa[a7])}}if(a6.length){if(au){z.markeron(a6,aU.markerstart,aU.markerstop,aU.markermove,"Linie")}if(aO){y.markeron(a6,aU.markerstart,aU.markerstop,aU.markermove,"Linie")}if(O){ar.markeron(a6,aU.markerstart,aU.markerstop,aU.markermove,"Linie")}}}}else{if(C.length==1){if(a2.status[0]){var a8="<strong>"+ao[0]+" ("+r("km",aM[0],10,true)+")</strong><br />"+aF[0];this.makePolyline(N,C[0],H[0],a0,Q,U,a5,a8);if(aa[0].length){if(au){z.plot(aa[0],H[0]);z.markeron(aa[0],aU.markerstart,aU.markerstop,aU.markermove,"Linie")}if(aO){y.plot(aa[0],H[0]);y.markeron(aa[0],aU.markerstart,aU.markerstop,aU.markermove,"Linie")}if(O){ar.plot(aa[0],H[0]);ar.markeron(aa[0],aU.markerstart,aU.markerstop,aU.markermove,"Linie")}}}}}}};this.showRoutes=function(){if(B){if(T.length>1){for(var w=0;w<T.length;w++){if(aA.status[w+1]){var a6="<strong>"+ac[w]+" ("+r("km",a1[w],10,true)+")</strong><br />"+al[w];this.makePolyline(N,T[w],an[w%H.length],aD,aG,U,a5,a6)}}}else{if(T.length==1){if(aA.status[0]){this.makePolyline(N,T[0],an[0],aD,aG,U,a5,ac[0]+"<br />"+r("km",a1[0],10,true))}}}}};this.show=function(w){N.clearOverlays();if(au){z.clear()}if(aO){y.clear()}if(O){ar.clear()}if(w.search("w")!=-1){aU.showWpts()}if(w.search("t")!=-1){aU.showTracks()}if(w.search("r")!=-1){aU.showRoutes()}};this.rescale=function(){if(B){N.setCenter(new GLatLng((aR+ay)/2,(v+aP)/2),I)}};this.Entfernung=function(){var w,a6;this.init=function(a7,a8){w=a8;a6=a7};this.rechne=function(a7,a8){var a9=new GLatLng(a6,w).distanceFrom(new GLatLng(a7,a8));w=a8;a6=a7;return a9/1000}};this.showtrackmarker=function(){e(af,"showtrackmarker",false);D=new GMarker(C[0][0],aw);N.addOverlay(D);aH.style.visibility="visible"};this.hidetrackmarker=function(){N.removeOverlay(D);aH.style.visibility="hidden"};this.settrackmarker=function(a7){N.removeOverlay(D);D=new GMarker(new GLatLng(a7.lat,a7.lon),aw);N.addOverlay(D);var a6=N.getCurrentMapType().getProjection().fromLatLngToPixel(N.fromDivPixelToLatLng(new GPoint(0,0),true),N.getZoom());var ba=N.getCurrentMapType().getProjection().fromLatLngToPixel(D.getPoint(),N.getZoom());var a8=D.getIcon().iconAnchor;var a9=D.getIcon().iconSize.width;var w=aH.clientHeight;var bb=new GControlPosition(G_ANCHOR_TOP_LEFT,new GSize(ba.x-a6.x-a8.x+a9,ba.y-a6.y-a8.y-w));bb.apply(aH)};this.markerstart=function(){e(af,"markerstart",false);aU.showtrackmarker();if(au){z.showmarker("Linie")}if(O){ar.showmarker("Linie")}if(aO){y.showmarker("Linie")}};this.markerstop=function(){aU.hidetrackmarker();e(af,"markerstop",false);if(au){z.hidemarker()}if(O){ar.hidemarker()}if(aO){y.hidemarker()}};this.markermove=function(a7,w){var a6=u("Strecke")+":&nbsp;"+r("km",w.x,1,true);if(au){a6+="<br />"+u("Höhe")+":&nbsp;"+r("m",Math.round(w.h),0,true);z.setmarker(w,"Linie")}if(O){a6+="<br />"+u("Geschw.")+":&nbsp;"+r("km/h",Math.round(w.v),0,true);ar.setmarker(w,"Linie")}if(aO){a6+="<br />"+u("Stg.")+":&nbsp;"+Math.round(w.s)+"%";y.setmarker(w,"Linie")}aH.innerHTML=a6;aU.settrackmarker(w)};var aC=function(a6){var w=new GMarker(new GLatLng(a6.lat,a6.lon),ag);GEvent.addListener(w,"click",function(){var a7=new Image();a7.onload=function(){w.openInfoWindowHtml("<img src='"+a6.name+"'/><br/>"+a6.cmt)};a7.src=a6.name});return w};var az=function(a6){var w=new GMarker(new GLatLng(a6.lat,a6.lon),{title:a6.name});GEvent.addListener(w,"click",function(){w.openInfoWindowHtml("<strong>"+a6.name+"</strong><br/>"+a6.cmt)});return w};var aZ=function(w){var a6=w.substr(w.lastIndexOf(".")+1).toLowerCase();return(a6=="jpg"||a6=="jpeg"||a6=="png"||a6=="gif")};this.makePolyline=function(w,bd,a8,a6,a9,ba,bc,a7){var bb=a4.dpEncodeToGPolyline(bd,a8,a6,a9);if(ap){GEvent.addListener(bb,"mouseover",function(be){e("","Line over, "+this.getVertexCount()+" Punkte",false);this.setStrokeStyle({color:bc,weight:ba})});GEvent.addListener(bb,"mouseout",function(){e("","Line out",false);this.setStrokeStyle({color:a8,weight:a6})});GEvent.addListener(bb,"click",function(be,bf){e("","Line click "+be+"  "+bf,false);w.openInfoWindow(be,a7)})}w.addOverlay(bb)}}function e(x,v,w){if(t){GLog.write("Map "+x+": "+v)}if(w){alert(v)}}function b(B,z,w){var y=B.getElementsByTagName("*");var A=z.toLowerCase()+":"+w.toLowerCase();var v=new Array();for(var x=0;x<y.length;x++){if(y[x].nodeName.toLowerCase()==A){v.push(y[x])}}return v}function s(w,E,C,F,z,x){var v=this;var D=E.length;this.nboxen=D;this.status=new Array(D);for(var A=0;A<D;A++){this.status[A]=z}var G;var B=document.createElement("div");B.style.position="absolute";B.style.display="inline";B.style.height="1.4em";B.style.overflow="hidden";B.style.backgroundColor="";B.style.zIndex=1000;B.style.margin="0";B.style.padding="0";B.onmouseover=function(){this.style.height="";this.style.overflow="";this.style.backgroundColor="white";this.style.paddingRight="0.3em";this.style.paddingBottom="0.2em"};B.onmouseout=function(){this.style.height="1.4em";this.style.overflow="hidden";this.style.backgroundColor="";this.style.paddingRight="";this.style.paddingBottom=""};for(var A=0;A<D;A++){G=document.createElement("input");G.type="checkbox";G.id=C+A;G.nr=A;if(A==0){G.onclick=function(){var I=D;var K=C;var H=this.checked;v.status[this.nr]=H;for(var J=1;J<I;J++){document.getElementById(K+J).checked=H;v.status[J]=H}x(v,this)}}else{G.onclick=function(){var I=D;var K=C;var H=false;for(var J=1;J<I;J++){H|=document.getElementById(K+J).checked}document.getElementById(K+"0").checked=H;v.status[0]=H==true;v.status[this.nr]=this.checked;x(v,this)}}B.appendChild(G);G.checked=z;G=document.createElement("span");if(A==0&&D==1){G.style.color=F[0]}else{if(A){G.style.color=F[(A-1)%F.length]}}G.appendChild(document.createTextNode(E[A]));B.appendChild(G);if(A<E.length-1){B.appendChild(document.createElement("br"))}}G=document.getElementById(w);G.appendChild(B);var y=document.createElement("span");y.appendChild(document.createTextNode(" X "+E[0]+" "));y.style.visibility="hidden";G.appendChild(y)}function n(x,w,v){if(x.addEventListener){x.addEventListener(w,v,false)}else{if(x.attachEvent){x.attachEvent("on"+w,function(){return v.call(x,window.event)})}}}function p(B){var y=B.substr(0,4);var x=B.substr(5,2)*1-1;var w=B.substr(8,2);var v=B.substr(11,2);var A=B.substr(14,2);var z=B.substr(17,2);return Date.UTC(y,x,w,v,A,z)}function j(K,L,I,M,E){var z=K.length,A=z-1;var N=new Array(z);for(var D=0;D<z;D++){N[D]={};N[D][M]=K[D][I];for(var w in K[D]){N[D][w]=K[D][w]}}if(z<2*E){return N}var C,J,F,G,H;var v=Math.floor(E/2);for(var D=0;D<z;D++){if(D<v){C=D}else{if(D>(A-v)){C=A-D}else{C=v}}if(C>0){G=F=0;H=Math.max(Math.abs(K[D][L]-K[D-C][L]),Math.abs(K[D][L]-K[D+C][L]));if(H==0){H=1}for(var B=D-C;B<=D+C;B++){J=(H-Math.abs(K[B][L]-K[D][L]))*C/H;G+=K[B][I]*J;F+=J}N[D][M]=G/F}}return N}function d(D,E,B,A,C){var v=D.length,w=v-1;if(v<3){for(var z=0;z<v;z++){D[z][A]=0}return D}var G,F;G=D[1][E]-D[0][E];F=D[1][B]-D[0][B];if(G==0){D[0][A]=0}else{D[0][A]=C*F/G}for(var z=1;z<w;z++){G=D[z+1][E]-D[z-1][E];F=D[z+1][B]-D[z-1][B];if(G==0){D[z][A]=D[z-1][A]}else{D[z][A]=C*F/G}}G=D[w-1][E]-D[w][E];F=D[w-1][B]-D[w][B];if(G==0){D[w][A]=D[w-1][A]}else{D[w][A]=C*F/G}return D}Array.prototype.sum=function(){for(var w=0,v=0;v<this.length;v++){w+=this[v]}return w};function o(B){var A=document.getElementById(B);var v=document.createElement("div");var D=A.appendChild(v);var x=document.createElement("div");this.w=parseInt(A.offsetWidth-1);this.h=parseInt(A.offsetHeight-1);var C=1;var z=1;var w=document.createElement("div");var y="#000000";w.style.position="absolute";w.style.width="1px";w.style.height="1px";w.style.overflow="hidden";w.style.left="0px";w.style.top="0px";w.style.backgroundColor=y;this.setbuf=function(E){z=C=Math.max(1,E)};this.flush=function(){D.appendChild(x);x=document.createElement("div");z=C};this.punkt=function(E,H,G){if(E<0||H<0||E>this.w||H>this.h){return}if(G!=y){y=G;w.style.backgroundColor=y}var F=w.cloneNode(true);F.style.left=Math.round(E)+"px";F.style.top=Math.round(this.h-H)+"px";x.appendChild(F);z--;if(!z){this.flush()}};this.ver_linie=function(E,G,F,I){if(E<0||E>this.w){return}if((G<0&&F<0)||(G>this.h&&F>this.h)){return}if(I!=y){y=I;w.style.backgroundColor=y}G=Math.max(0,Math.min(this.h,G));F=Math.max(0,Math.min(this.h,F));var H=w.cloneNode(true);H.style.left=Math.round(E)+"px";H.style.top=Math.round(this.h-Math.max(G,F))+"px";H.style.height=Math.round(Math.abs(F-G)+1)+"px";x.appendChild(H);z--;if(!z){this.flush()}};this.hor_linie=function(G,F,I,H){if(I<0||I>this.h){return}if((G<0&&F<0)||(G>this.w&&F>this.w)){return}if(H!=y){y=H;w.style.backgroundColor=y}G=Math.max(0,Math.min(this.w,G));F=Math.max(0,Math.min(this.w,F));var E=w.cloneNode(true);E.style.left=Math.round(Math.min(G,F))+"px";E.style.top=Math.round(this.h-I)+"px";E.style.width=Math.round(Math.abs(F-G)+1)+"px";x.appendChild(E);z--;if(!z){this.flush()}};this.linie=function(G,P,O,I,K){G=Math.round(G);O=Math.round(O);P=Math.round(P);I=Math.round(I);var R=O-G;var Q=I-P;if(R==0&&Q==0){this.punkt(G,P,K)}else{if(R==0){this.ver_linie(G,P,I,K)}else{if(Q==0){this.hor_linie(G,O,P,K)}else{var F=Math.abs(R);var E=Math.abs(Q);var J=Math.min(F,E);R=R/J;Q=Q/J;if(F==E){for(var M=G,L=P,H=0;H<=J;M+=R,L+=Q,H++){this.punkt(M,L,K)}}else{if(F<E){var N=Q/Math.abs(Q);this.ver_linie(G,P,P+Q/2-N,K);for(var M=G+R,L=P+Q/2,H=1;H<J;M+=R,L+=Q,H++){this.ver_linie(M,L,L+Q-N,K)}this.ver_linie(O,I-(Q+N)/2,I,K)}else{var N=R/Math.abs(R);this.hor_linie(G,G+R/2-N,P,K);for(var M=G+R/2,L=P+Q,H=1;H<J;M+=R,L+=Q,H++){this.hor_linie(M,M+R-N,L,K)}this.hor_linie(O-(R+N)/2,O,I,K)}}}}}};this.text=function(K,J,M,G,L,I){var F="m";var H="m";if(I&&I.length){F=I.substr(0,1);if(I.length>1){H=I.substr(1,1)}}var E=document.createElement("div");E.style.position="absolute";E.style.fontSize=M+"px";E.style.color=G;E.style.textAlign="center";E.innerHTML=L;D.appendChild(E);switch(F){case"l":default:E.style.left=Math.round(K)+"px";break;case"m":E.style.left=Math.round(K)-E.offsetWidth/2+"px";break;case"r":E.style.left=Math.round(K)-E.offsetWidth+"px";break}switch(H){case"o":default:E.style.top=Math.round(this.h-J)+"px";break;case"m":E.style.top=Math.round(this.h-J)-E.offsetHeight/2+"px";break;case"u":E.style.top=Math.round(this.h-J)-E.offsetHeight+"px";break}};this.del=function(){A.removeChild(D);delete D;delete x;var E=document.createElement("div");D=A.appendChild(E);x=document.createElement("div");z=C}}var q=function(R,N,W){var P=function(w){return Math.log(w)/Math.LN10};var H=function(w){w=(typeof w==="number")?w:parseFloat(w);return w.toFixed((w>10)?0:1)};var F=function(aa,af,ab,ad,ac,w){var ae=document.createElement("div");ae.id=af;ae.style.position="absolute";ae.style.left=ab+"px";ae.style.top=ad+"px";ae.style.width=ac+"px";ae.style.height=w+"px";aa.appendChild(ae);return ae};var V=R+"plot";var Q=R+"plotm";var x=R+"xlabel";var C=R+"ylabel";var G=N?N:"x";var M=W?W:"y";e(R,G+" "+M,false);var O=0,T=0,X=0,Z=0;var v=0,B=0;var L,J,A,z;var S=null;var y=null;var D=null;var U=document.getElementById(R);var I=parseInt(U.offsetWidth-1);var Y=parseInt(U.offsetHeight-1);var K=document.createElement("div");var E;K.style.position="absolute";K.style.width=I+"px";K.style.height=Y+"px";U.appendChild(K);this.scale=function(w){if(O==T){T=O=w[0][G];Z=X=w[0][M]}for(var ab=0;ab<w.length;ab++){var aa=w[ab];if(aa[G]<O){O=aa[G]}if(aa[G]>T){T=aa[G]}if(aa[M]<X){X=aa[M]}if(aa[M]>Z){Z=aa[M]}}e(R,G+": "+O+" ... "+T+"; "+M+": "+X+" ... "+Z,false);if(T==O){O-=0.5;T+=0.5}L=(T-O)/100;O-=L;T+=L;L=T-O;A=Math.pow(10,Math.floor(P(L))-1);O=Math.floor(O/A)*A;T=Math.ceil(T/A)*A;if(Z==X){X-=0.5;Z+=0.5}J=(Z-X)/100;X-=J;Z+=J;J=Z-X;z=Math.pow(10,Math.floor(P(J))-1);X=Math.floor(X/z)*z;Z=Math.ceil(Z/z)*z};this.clear=function(){K.innerHTML="";T=O=Z=X=v=B=0};this.frame=function(aa,al,ag,ac,ab,am){K.innerHTML="";F(K,V,aa,0,I-aa,Y-al);if(ag.length){F(K,x,aa,Y-al,I-aa,al)}F(K,C,0,0,aa,Y-al);F(K,Q,aa,0,I-aa,Y-al);if(ag.length){y=new o(x)}D=new o(C);S=new o(V);S.setbuf(1000);v=S.w/(T-O);B=S.h/(Z-X);if(ag.length){y.text(y.w/2,0,16,"black",ag,"mu")}D.text(7,D.h/2,16,"black",ac,"mm");var af=100*L/S.w;var ae=S.h<250?50*J/S.h:100*J/S.h;var ai=Math.pow(10,Math.floor(P(af)));af=Math.round(af/ai);var an=Math.pow(10,Math.floor(P(ae)));ae=Math.round(ae/an);af=Number(String(af).replace(/3/,"2").replace(/[4567]/,"5").replace(/[89]/,"10"));ae=Number(String(ae).replace(/3/,"2").replace(/[4567]/,"5").replace(/[89]/,"10"));af*=ai;ae*=an;var ah=Math.ceil(O/af)*af;var ad=Math.ceil(X/ae)*ae;for(var ak=ah;ak<=T;ak+=af){S.linie((ak-O)*v,0,(ak-O)*v,S.h,"gray");if(ag.length){y.text((ak-O)*v,y.h,14,"black",H(r(ab,ak,10,false)),"mo")}}for(var aj=ad;aj<=Z;aj+=ae){S.linie(0,(aj-X)*B,S.w,(aj-X)*B,"gray");D.text(D.w,(aj-X)*B,14,"black",H(r(am,aj,10,false)),"rm")}var w=new o(V);w.linie(0,0,w.w,0,"black");w.linie(w.w,0,w.w,w.h,"black");w.linie(w.w,w.h,0,w.h,"black");w.linie(0,w.h,0,0,"black")};this.plot=function(w,aa){for(var ab=0;ab<w.length-1;ab++){S.linie((w[ab][G]-O)*v,(w[ab][M]-X)*B,(w[ab+1][G]-O)*v,(w[ab+1][M]-X)*B,aa)}S.flush()};this.showmarker=function(ab){var aa=document.getElementById(V);E=document.createElement("div");E.style.position="absolute";E.style.display="none";if(ab=="Punkt"){E.style.fontSize="32px";var w=document.createTextNode(String.fromCharCode(8226));E.appendChild(w)}else{E.style.top="0";E.style.height=S.h+"px";E.style.width="1px";E.style.backgroundColor="black"}aa.appendChild(E)};this.hidemarker=function(){E.style.display="none"};this.setmarker=function(w,aa){E.style.display="";if(aa=="Punkt"){E.style.left=Math.round((w[G]-O)*v)-E.offsetWidth/2+"px";E.style.top=Math.round(S.h-(w[M]-X)*B)-E.offsetHeight/2+"px"}else{E.style.left=Math.round((w[G]-O)*v)+"px"}};this.markeron=function(ab,ad,aa,ag,ac){var ae=this;var w=0;var af=document.getElementById(Q);af.onmouseover=function(ah){if(!ah){ah=window.event}ah.cancelBubble=true;if(ah.stopPropagation){ah.stopPropagation()}af.onmousemove=function(ao){if(!ao){ao=window.event}ao.cancelBubble=true;if(ao.stopPropagation){ao.stopPropagation()}w=ao.layerX?ao.layerX:ao.offsetX;var ai=w/v+O;var an=ab.length;var am,ak;if(ai<=ab[0][G]){ak=0}else{if(ai>=ab[an-1][G]){ak=an-1}else{am=an/2;ak=Math.floor(am);var ap=Math.ceil(am/2);do{var aj=ab[ak][G];if(ai<aj){am-=ap;if(am<0){am=0}}else{if(ai>aj){am+=ap;if(am>an-1){am=an-1}}else{break}}ak=Math.floor(am);ap=ap/2}while(ap>=0.5)}}if(ag&&typeof(ag)=="function"){ag(ak,ab[ak])}return false};if(ad&&typeof(ad)=="function"){ad()}return false};af.onmouseout=function(ah){if(!ah){ah=window.event}af.onmousemove=null;if(aa&&typeof(aa)=="function"){aa()}return false}};this.markeroff=function(){var w=document.getElementById(V);w.onmousemove=null;w.onmouseout=null}};var c=function(){this.numLevels=18;this.zoomFactor=2;this.verySmall=0.00001;this.forceEndpoints=true;this.zoomLevelBreaks=new Array(this.numLevels);for(var v=0;v<this.numLevels;v++){this.zoomLevelBreaks[v]=this.verySmall*Math.pow(this.zoomFactor,this.numLevels-v-1)}};c.prototype.dpEncode=function(H){var F=0;var E=[];var C=new Array(H.length);var B,w,I,A,G,D;var z,v,y;var x;if(H.length>2){E.push([0,H.length-1]);while(E.length>0){D=E.pop();B=0;x=Math.pow(H[D[1]].lat()-H[D[0]].lat(),2)+Math.pow(H[D[1]].lng()-H[D[0]].lng(),2);for(z=D[0]+1;z<D[1];z++){I=this.distance(H[z],H[D[0]],H[D[1]],x);if(I>B){B=I;w=z;if(B>F){F=B}}}if(B>this.verySmall){C[w]=B;E.push([D[0],w]);E.push([w,D[1]])}}}v=this.createEncodings(H,C);y=this.encodeLevels(H,C,F);return{encodedPoints:v,encodedLevels:y,encodedPointsLiteral:v.replace(/\\/g,"\\\\")}};c.prototype.dpEncodeToJSON=function(y,w,z,x){var v;if(!x){x=0.9}if(!z){z=3}if(!w){w="#0000ff"}v=this.dpEncode(y);return{color:w,weight:z,opacity:x,points:v.encodedPoints,levels:v.encodedLevels,numLevels:this.numLevels,zoomFactor:this.zoomFactor}};c.prototype.dpEncodeToGPolyline=function(x,v,y,w){if(!w){w=0.9}if(!y){y=3}if(!v){v="#0000ff"}return new GPolyline.fromEncoded(this.dpEncodeToJSON(x,v,y,w))};c.prototype.distance=function(A,z,y,v){var x,w;if(z.lat()===y.lat()&&z.lng()===y.lng()){w=Math.sqrt(Math.pow(y.lat()-A.lat(),2)+Math.pow(y.lng()-A.lng(),2))}else{x=((A.lat()-z.lat())*(y.lat()-z.lat())+(A.lng()-z.lng())*(y.lng()-z.lng()))/v;if(x<=0){w=Math.sqrt(Math.pow(A.lat()-z.lat(),2)+Math.pow(A.lng()-z.lng(),2))}if(x>=1){w=Math.sqrt(Math.pow(A.lat()-y.lat(),2)+Math.pow(A.lng()-y.lng(),2))}if(0<x&&x<1){w=Math.sqrt(Math.pow(A.lat()-z.lat()-x*(y.lat()-z.lat()),2)+Math.pow(A.lng()-z.lng()-x*(y.lng()-z.lng()),2))}}return w};c.prototype.createEncodings=function(H,A){var w,B,C;var y=0;var z=0;var x="";for(w=0;w<H.length;w++){if(A[w]!=undefined||w==0||w==H.length-1){var F=H[w];var D=F.lat();var E=F.lng();var v=Math.floor(D*100000);var G=Math.floor(E*100000);B=v-y;C=G-z;y=v;z=G;x+=this.encodeSignedNumber(B)+this.encodeSignedNumber(C)}}return x};c.prototype.computeLevel=function(v){var w=0;if(v>this.verySmall){while(v<this.zoomLevelBreaks[w]){w++}}return w};c.prototype.encodeLevels=function(y,z,w){var v;var x="";if(this.forceEndpoints){x+=this.encodeNumber(this.numLevels-1)}else{x+=this.encodeNumber(this.numLevels-this.computeLevel(w)-1)}for(v=1;v<y.length-1;v++){if(z[v]!=undefined){x+=this.encodeNumber(this.numLevels-this.computeLevel(z[v])-1)}}if(this.forceEndpoints){x+=this.encodeNumber(this.numLevels-1)}else{x+=this.encodeNumber(this.numLevels-this.computeLevel(w)-1)}return x};c.prototype.encodeNumber=function(w){var v="";var x,y;while(w>=32){x=(32|(w&31))+63;v+=(String.fromCharCode(x));w>>=5}y=w+63;v+=(String.fromCharCode(y));return v};c.prototype.encodeSignedNumber=function(v){var w=v<<1;if(v<0){w=~(w)}return(this.encodeNumber(w))};c.latLng=function(w,v){this.y=w;this.x=v};c.latLng.prototype.lat=function(){return this.y};c.latLng.prototype.lng=function(){return this.x};c.pointsToLatLngs=function(w){var v,x;x=new Array(0);for(v=0;v<w.length;v++){x.push(new c.latLng(w[v][0],w[v][1]))}return x};c.pointsToGLatLngs=function(x){var w,v;v=new Array(0);for(w=0;w<x.length;w++){v.push(new GLatLng(x[w][0],x[w][1]))}return v};return{addViewer:function a(w,v,z){var A,y="G_PHYSICAL_MAP",x;if(typeof z!=="object"){z={}}f+=1;if(typeof google!=="object"||typeof google.maps!=="object"){document.write('<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key='+w+'" type="text/javascript"><\/script>')}if(z.id){A=z.id}else{A="gpxviewer_"+f}if(z.mapType){y=z.mapType}if(!document.getElementById(A)){document.write('<div id="'+A+'" style="width:500px;height:500px;float:left"></div>');document.write('<div style="float:left;padding-left:20px">');document.write('<div id="'+A+'_hp" class="no_x" style="width:500px;height:200px;margin-top:10px"></div>');document.write('<div id="'+A+'_sp" class="no_x" style="width:500px;height:200px;margin-top:-37px"></div>');document.write('<div id="'+A+'_vp" style="width:500px;height:200px;margin-top:-37px"></div></div>')}n(window,"load",function(){var C=new i(A),B={G_NORMAL_MAP:G_NORMAL_MAP,G_SATELLITE_MAP:G_SATELLITE_MAP,G_HYBRID_MAP:G_HYBRID_MAP,G_PHYSICAL_MAP:G_PHYSICAL_MAP,OSM:"osm_mapnik_map",OSM_TAH:"osm_tah_map",OSM_CYCLE:"osm_cycle_map"};C.Spur(v,B[y]);if(f===1){n(window,"unload",GUnload)}})}}})();